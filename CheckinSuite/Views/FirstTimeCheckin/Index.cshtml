@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Html.Partial("~/Views/Shared/KnockoutTemplates.cshtml")

<input type="hidden" value="@ViewBag.AdultAge" id="adultAge"/>

<script type="text/html" id="createPerson-template">
    <div class="lightbox" data-bind="visible: isVisible">
        <div class="lightbox-content">
            <div class="h3 mb2">Please enter your information</div>
            <form class="center pure-form">
                <input type="text" data-bind="textInput: phone" placeholder="Phone" />
                <br>

                
                    <input type="button" value="Select Gender" class="lightbox-button pure-button mt2" data-bind="click: selectGenderLightbox.showLightbox,
                                                                                                      value: selectGenderLightbox.buttonText,
                                                                                                      attr:{'style': 'background-color:' + selectGenderLightbox.buttonColor()},
                                                                                                      css:{'validation-error': gender.hasError}">
                    <br>
                <div data-bind="visible: isChild">
                    <input type="button" value="Select Age/Grade" class="lightbox-button pure-button mt2" data-bind="click: selectGradeLightbox.showLightbox,
                                                                                                         value: selectGradeLightbox.buttonText,
                                                                                                         attr:{'style': 'background-color:' + selectGradeLightbox.buttonColor()},
                                                                                                         css:{'validation-error': grade.hasError}">
                    <br>
                </div>               

                <input type="submit" value="Submit" id="createPersonSubmitButton" class="mt2 pure-button pure-button-primary" data-bind="click: submit"/>
                <i class="loader fa fa-spinner fa-pulse fa-2x mt2" id="createPersonSubmitSpinner" style="display:none;"></i>
            </form>

            <div data-bind="template: {name: 'lightboxSelection-template', data: selectGenderLightbox}"></div>
            <div data-bind="template: {name: 'lightboxSelection-template', data: selectGradeLightbox}"></div>
        </div>
    </div>
</script>

<div class="center center-constrained margin-bottom" style="padding:20vh 0;">
    <div class="h1 w3">Welcome</div>
    <div class="h3 mb2">To begin, please tell us your name and birthdate</div>
    <form class="pure-form" id="searchForm">

        <div class="block-small mb2">

            <input type="text" data-bind="textInput: firstName, hasFocus: true, css:{'validation-error': firstName.hasError}" placeholder="First Name" />

            <input type="text" data-bind="textInput: lastName, css:{'validation-error': lastName.hasError}" placeholder="Last Name" />

            <input type="text" id="dateOfBirth" data-bind="textInput: dateOfBirth, css:{'validation-error': dateOfBirth.hasError}" placeholder="mm/dd/yyyy" /> <br /><br>
            
            <input type="submit" value="Search" data-bind="click: submit" class="search-button pure-button pure-button-primary block-small" />
            <i class="loader fa fa-spinner fa-pulse fa-2x" id="indexSubmitSpinner" style="display:none;"></i>
        </div>
    </form>

</div>

<div data-bind="template: {name: 'validatePin-template', data: validatePinLightbox}"></div>
<div data-bind="template: {name: 'createPerson-template', data: createPersonLightbox}"></div>

<script src="~/Resources/js/lib/knockout.js"></script>
<script src="~/Resources/js/lib/kavie.js"></script>
<script src="~/Resources/js/lib/ko-forced-format.js"></script>
<script src="~/Resources/js/Shared/knockout-helpers.js"></script>

<script src="~/Resources/js/Shared/LightboxSelection.js"></script>
<script src="~/Resources/js/Shared/ValidatePinModel.js"></script>

<script src="~/Resources/js/lib/dentist.js"></script>
<script src="~/Resources/js/lib/sweetalert2.min.js"></script>
<script src="~/Resources/js/lib/moment.js"></script>

<script src="~/Resources/js/FirstTimeCheckin/Index/CreatePersonModel.js"></script>

<script src="~/Resources/js/FirstTimeCheckin/Index/index.js"></script>

<script>
    run();
</script>